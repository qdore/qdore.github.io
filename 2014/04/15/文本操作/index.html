<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>文本操作 | QW&#39;s blog</title>
  <meta name="author" content="Qiang Wei">
  
  <meta name="description" content="Until the end of the world">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="文本操作"/>
  <meta property="og:site_name" content="QW&#39;s blog"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="QW&#39;s blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">QW&#39;s blog</a></h1>
  <h2><a href="/">Until the end of the world</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
      <li><a href="/about">about</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-04-15T04:41:24.000Z"><a href="/2014/04/15/文本操作/">4月 15 2014</a></time>
      
      
  
    <h1 class="title">文本操作</h1>
  

    </header>
    <div class="entry">
      
        <h3 id="head和tail打印文件">head和tail打印文件</h3>
<ul>
<li><p>head -n 5 file : 打印前5行</p>
</li>
<li><p>tail -n 5 file : 打印后5行</p>
</li>
<li><p>seq 10|head -n 5 </p>
</li>
</ul>
<h3 id="切分数据">切分数据</h3>
<ul>
<li><p>file=some.jpg </p>
</li>
<li><p>echo ${file%.*} : 从后面删除匹配的数据(贪婪:%%)</p>
</li>
</ul>
<ul>
<li>echo ${file#*.} : 从前面删除匹配的数据(贪婪:##)</li>
</ul>
<h3 id="用cat进行连接">用cat进行连接</h3>
<ul>
<li><p>cat file1 file2 : 连接两个文件</p>
</li>
<li><p>cat -n file1 : 显示行号</p>
</li>
<li><p>cat -s file1 : 删除多余的空格行</p>
</li>
<li><p>cat -T file1 : 显示制表符为^I</p>
</li>
</ul>
<h3 id="统计文件行数,单词数,字符数">统计文件行数,单词数,字符数</h3>
<ul>
<li><p>wc -l file : 统计行数</p>
</li>
<li><p>wc -w file : 统计单词数</p>
</li>
<li><p>wc -c file : 统计指定的字符数</p>
</li>
<li><p>wc file : 分别打印行数,单词数和字符数</p>
</li>
<li><p>wc -L file : 打印最长一行的行数</p>
</li>
</ul>
<h3 id="tr字符转换">tr字符转换</h3>
<ul>
<li><p>tr &#39;A-Z&#39; &#39;a-z&#39; : 字符从大写转换到小写</p>
</li>
<li><p>tr &#39;0-9&#39; &#39;9876543210&#39; : 数字加密和解密</p>
</li>
<li><p>tr &#39;a-zA-Z&#39; &#39;n-za-mN-ZA-M&#39; :  ROT13加密和解密</p>
</li>
<li><p>tr -d &#39;0-9&#39; : 从字符中删除所有数字</p>
</li>
<li><p>tr -s &#39; &#39; : 压缩字符</p>
</li>
<li><p>tr &#39;\n&#39; &#39;+&#39; : 替换字符</p>
</li>
<li><p>tr &#39;[:lower:]&#39; &#39;[:upper:]&#39; : 从小写转换到大写</p>
</li>
</ul>
<pre><code>[<span class="link_label">:alnum:</span>] : 所有的字母和数字[<span class="link_label">0-9</span>][<span class="link_reference">a-z</span>][<span class="link_label">A-Z</span>]

[<span class="link_label">:alpha:</span>] : 所有的字母[<span class="link_label">a-z</span>][<span class="link_reference">A-Z</span>]

[:blank:] : 所有呈水平排列的空白字符

[:cntrl:] : 所有的控制字符

[:digit:] : 所有的数字[0-9]

[:graph:] : 所有的可打印字符，不包括空格

[:lower:] : 所有的小写字母[a-z]

[:print:]  : 所有的可打印字符，包括空格

[:punct:] : 所有的标点字符

[:space:] : 所有呈水平或垂直排列的空白字符

[:upper:] : 所有的大写字母[A-Z]

[:xdigit:] : 所有的十六进制数

[=字符=] : 所有和指定字符相等的字符

[O<span class="emphasis">*n] : 表示字符O重复出现指定次数 n。因此[O*</span>2]匹配OO的字符串
</code></pre><h3 id="greq匹配">greq匹配</h3>
<ul>
<li><p>grep asd file : 对file的内容进行匹配,并输出匹配到的行</p>
</li>
<li><p>grep -E [a-z]* file : 对file的内容进行正则表达式匹配</p>
</li>
<li><p>grep -o asd file : 只输出匹配到得部分</p>
</li>
<li><p>grep -v asd file : 打印没有匹配到的所有行</p>
</li>
<li><p>grep -c asd file : 打印匹配行的行数</p>
</li>
<li><p>grep -n asd file : 打印出匹配的行号</p>
</li>
<li><p>grep -bo asd file : 打印出字节偏移值和匹配的字符</p>
</li>
<li><p>grep -l asd file1 file2 : 打印出匹配文本位于哪一个文件中</p>
</li>
<li><p>grep -R asd . : 递归搜索匹配的字符</p>
</li>
<li><p>grep -i asd file : 不区分大小写</p>
</li>
<li><p>grep -e asd -e qwe file : 指定多个匹配样式</p>
</li>
<li><p>grep asd <em> —include </em>.txt : 指定某一类型的文件</p>
</li>
<li><p>grep asd <em> —exclude </em>.txt : 排除某一类型的文件</p>
</li>
<li><p>grep -z asd file | xargs -0 : 打印指定&#39;\0&#39;结尾</p>
</li>
<li><p>grep -q asd file : 静默输出,只有返回值</p>
</li>
<li><p>grep -A 3 asd file : 打印匹配结果之后的3行</p>
</li>
</ul>
<ul>
<li>grep -B 3 asd file : 打印匹配结果之前的3行</li>
</ul>
<ul>
<li>grep -C 3 asd file : 打印匹配结果之前和之后的3行</li>
</ul>
<h3 id="cut切分文件">cut切分文件</h3>
<ul>
<li><p>cut -f 2,3 file : 打印file的第二列第三列(以&#39;\t&#39;作定界符)</p>
</li>
<li><p>cut -f 2,3 —complete file : 打印补集</p>
</li>
<li><p>cut -f 2 -d &#39; &#39; file : 以空格做定界符</p>
</li>
<li><p>cut -c 1-5 file : 指定打印字符数</p>
</li>
<li><p>cut —output-delomiter , file : 指定输出定界符为&#39;,&#39;</p>
</li>
</ul>
<h3 id="paste拼接文件">paste拼接文件</h3>
<ul>
<li><p>paste file1 file2</p>
</li>
<li><p>paste -d , file1 file2 : 指定,为定界符</p>
</li>
</ul>
<h4 id="sed文本替换">sed文本替换</h4>
<ul>
<li><p>sed s/oldstring/newstring/ file : 替换第一处匹配到的字符串</p>
</li>
<li><p>sed s/oldstring/newstring/g file : 替换所有匹配到的字符串</p>
</li>
</ul>
<ul>
<li><p>sed s/oldstring/newstring/3g file : 替换第三次匹配到的字符串</p>
</li>
<li><p>sed /^$/d file : 删除空白行</p>
</li>
<li><p>sed -i s/oldstring/newstring/g file : 直接输出到file中</p>
</li>
</ul>
<h3 id="awk高级文本处理">awk高级文本处理</h3>
<h4 id="简洁用法:">简洁用法:</h4>
<pre><code><span class="variable">#cat</span> /etc/passwd <span class="subst">|</span>awk <span class="attribute">-F</span> <span class="subst">&amp;</span><span class="variable">#39</span>;:<span class="subst">&amp;</span><span class="variable">#39</span>; <span class="subst">&amp;</span><span class="variable">#39</span>;
</code></pre><p>BEGIN {print “name,shell”}<br>{print $1”\t”$7}<br>END {print “blue,/bin/nosh”}<br>&#39;<br>    root     /bin/bash </p>
<pre><code>daemon   /bin/sh 

bin      /bin/sh 

sys      /bin/sh

awk &amp;#<span class="number">39</span>;BEGIN { } {<span class="keyword">if</span>(<span class="keyword">match</span>(<span class="variable">$1</span>,<span class="string">"//"</span>)){<span class="keyword">print</span> substr(<span class="variable">$0</span>,<span class="number">3</span>)}<span class="keyword">else</span>{<span class="keyword">print</span> <span class="string">"//"</span><span class="variable">$0</span>} }END { }&amp;#<span class="number">39</span>;
</code></pre><h4 id="awk内置变量:">awk内置变量:</h4>
<pre><code>ARGC : 命令行参数个数


ARGV : 命令行参数排列

ENVIRON : 支持队列中系统环境变量的使用

FILENAME : awk浏览的文件名

FNR : 浏览文件的记录数

FS : 设置输入域分隔符，等价于命令行 -F选项

NF : 浏览记录的域的个数

NR : 已读的记录数

OFS : 输出域分隔符

ORS : 输出记录分隔符

RS : 控制记录分隔符

 <span class="variable">$0</span>  :  变量是指整条记录

 <span class="variable">$1</span>  :  表示当前行的第一个域
</code></pre><h4 id="awk内建的字符串控制函数">awk内建的字符串控制函数</h4>
<pre><code>gsub(r,<span class="keyword">s</span>) : 在整个<span class="variable">$0</span>中用<span class="keyword">s</span>替代r

gsub(r,<span class="keyword">s</span>,t) : 在整个t中用<span class="keyword">s</span>替代r

<span class="keyword">index</span>(<span class="keyword">s</span>,t) : 返回<span class="keyword">s</span>中字符串t的第一位置

<span class="keyword">length</span>(<span class="keyword">s</span>) : 返回<span class="keyword">s</span>长度

match(<span class="keyword">s</span>,r) : 测试<span class="keyword">s</span>是否包含匹配r的字符串

<span class="keyword">split</span>(<span class="keyword">s</span>,a,fs) : 在fs上将<span class="keyword">s</span>分成序列a

sprint(fmt,<span class="keyword">exp</span>) : 返回经fmt格式化后的<span class="keyword">exp</span>

<span class="sub"><span class="keyword">sub</span>(r,s) : 用$0中最左边最长的子串代替s

substr(s,p) : 返回字符串s中从p开始的后缀部分

substr(s,p,n) : 返回字符串s中从p开始长度为n的后缀部分</span>
</code></pre>
      
    </div>
    <footer>
      
        
  
  <div class="categories">
    <a href="/categories/shell/">shell</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/shell/">shell</a>
  </div>

        
  <div class="addthis addthis_toolbox addthis_default_style">
    
      <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    
    
      <a class="addthis_button_tweet"></a>
    
    
      <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    
    
      <a class="addthis_button_pinterest_pinit" pi:pinit:layout="horizontal"></a>
    
    <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js"></script>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="请将此处替换成文章在你的站点中的ID" data-title="请替换成文章的标题" data-url="请替换成文章的网址"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"qiangwei199212"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->
</section>


</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:yoursite.com">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/C++11/">C++11</a><small>14</small></li>
  
    <li><a href="/categories/HTML/">HTML</a><small>14</small></li>
  
    <li><a href="/categories/SQL/">SQL</a><small>11</small></li>
  
    <li><a href="/categories/boost/">boost</a><small>9</small></li>
  
    <li><a href="/categories/python/">python</a><small>1</small></li>
  
    <li><a href="/categories/shell/">shell</a><small>12</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">标签</h3>
  <ul class="entry">
  
    <li><a href="/tags/C++11/">C++11</a><small>14</small></li>
  
    <li><a href="/tags/HTML/">HTML</a><small>14</small></li>
  
    <li><a href="/tags/SQL/">SQL</a><small>11</small></li>
  
    <li><a href="/tags/boost/">boost</a><small>9</small></li>
  
    <li><a href="/tags/python/">python</a><small>1</small></li>
  
    <li><a href="/tags/shell/">shell</a><small>12</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2014 Qiang Wei
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>